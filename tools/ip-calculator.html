<!DOCTYPE html>
<html lang="nl">
    <head>
        <meta charset="UTF-8">
        <title>jonasclaes.be | IP Calculator</title>
        <meta name="author" content="Jonas Claes">
        <meta name="description" content="Ik ben Jonas Claes, software ontwikkelaar en student. Ik studeer Toegepaste Informatica aan de Thomas More IT Factory in Geel in het eerste jaar. In mijn vrije tijd ben ik enorm veel bezig met technologie, ik speel met alles van microcontrollers tot netwerken en software. Verder ga ik soms eens met een camera op pad.">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap-reboot.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap-grid.min.css">
        <script src="https://kit.fontawesome.com/030c351c8e.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="/assets/css/styles.css">
        <link rel="stylesheet" href="/assets/css/ipCalculator.css">

        <!-- Favicon and Android/iOS specific icons and metadata -->
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/image/icons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/assets/image/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/assets/image/icons/favicon-16x16.png">
        <link rel="manifest" href="/assets/image/icons/site.webmanifest">
        <link rel="mask-icon" href="/assets/image/icons/safari-pinned-tab.svg" color="#0066ff">
        <link rel="shortcut icon" href="/assets/image/icons/favicon.ico">
        <meta name="apple-mobile-web-app-title" content="jonasclaes.be">
        <meta name="application-name" content="jonasclaes.be">
        <meta name="msapplication-TileColor" content="#2b5797">
        <meta name="msapplication-config" content="/assets/image/icons/browserconfig.xml">
        <meta name="theme-color" content="#0066ff">
    </head>
    <body>
        <div class="imgBackground">
            <img src="/assets/image/background.jpg" alt="background">
        </div>
        <div class="arrowTop">
            <a href="#">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500"><style type="text/css">
                    .st0{fill:#FFFFFF;}
                    .st1{fill:#FFFFFF;stroke:#000000;stroke-width:0;stroke-linecap:round;stroke-linejoin:round;}
                </style><polygon class="st0" points="138 335 138 380 251 267 362 380 362 335 251 222 "/><polygon class="st0" points="251 120 138 233 138 278 251 165 362 278 362 233 "/><line class="st1" x1="251" y1="267" x2="138" y2="380"/><line class="st1" x1="138" y1="335" x2="251" y2="222"/><line class="st1" x1="138" y1="335" x2="138" y2="380"/><line class="st1" x1="362" y1="380" x2="362" y2="335"/><line class="st1" x1="251" y1="267" x2="362" y2="380"/><line class="st1" x1="362" y1="335" x2="251" y2="222"/><line class="st1" x1="251" y1="165" x2="138" y2="278"/><line class="st1" x1="251" y1="120" x2="138" y2="233"/><line class="st1" x1="138" y1="233" x2="138" y2="278"/><line class="st1" x1="362" y1="278" x2="362" y2="233"/><line class="st1" x1="362" y1="278" x2="251" y2="165"/><line class="st1" x1="251" y1="120" x2="362" y2="233"/></svg>
            </a>
        </div>
        <div class="container-fluid p-0">
            <header class="row justify-content-between align-items-center mx-0 mx-md-5">
                <h1 class="col-3 col-sm-3 col-md-2"><a href="/">jonasclaes.be</a></h1>

                <nav class="col-auto">
                    <ul class="m-0">
                        <li><a href="/">Home</a></li>
                    </ul>
                </nav>
            </header>
            <section class="jumbotron row mx-3 mx-md-5">
                <div>
                    <h2 class="col-12">IPv4 and IPv6 calculator</h2>
                </div>
            </section>
            <section class="row m-0 blockSection" id="homeWhoAmI">
                <h2 class="col-12 center mb-5">IPv4 private ranges<i class="fas fa-network-wired"></i></h2>
                <form id="fIPv4Calculator" class="col-12 row m-0">
                    <div class="col-6">
                        <div class="form-group">
                            <label for="fIPv4CalculatorIpAddress">IP Address:</label>
                            <input type="text" name="ipAddress" id="fIPv4CalculatorIpAddress">
                        </div>
                        <div class="form-group">
                            <p>IP Address (binary):</p>
                            <div class="octets">
                                <div class="octet">
                                    <label for="fIPv4CalculatorIpAddressBinary1">Octet 1:</label>
                                    <input type="text" name="ipAddressBinary" id="fIPv4CalculatorIpAddressBinary1">
                                </div><div class="octet">
                                    <label for="fIPv4CalculatorIpAddressBinary2">Octet 2:</label>
                                    <input type="text" name="ipAddressBinary" id="fIPv4CalculatorIpAddressBinary2">
                                </div><div class="octet">
                                    <label for="fIPv4CalculatorIpAddressBinary3">Octet 3:</label>
                                    <input type="text" name="ipAddressBinary" id="fIPv4CalculatorIpAddressBinary3">
                                </div><div class="octet">
                                    <label for="fIPv4CalculatorIpAddressBinary4">Octet 4:</label>
                                    <input type="text" name="ipAddressBinary" id="fIPv4CalculatorIpAddressBinary4">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="form-group">
                            <label for="fIPv4CalculatorAmountAddresses">Addresses:</label>
                            <input type="text" name="amountAddresses" id="fIPv4CalculatorAmountAddresses">
                        </div>
                        <div class="form-group">
                            <label for="fIPv4CalculatorAmountNets">Networks:</label>
                            <input type="text" name="amountNets" id="fIPv4CalculatorAmountNets">
                        </div>
                        <div class="form-group">
                            <label for="fIPv4CalculatorAmountHosts">Hosts:</label>
                            <input type="text" name="amountHosts" id="fIPv4CalculatorAmountHosts">
                        </div>
                    </div>
                </form>
            </section>
            <footer class="row justify-content-center align-items-center m-0">
                <small class="col-12">
                    &copy; Copyright 2020-2021 | Design by <span>Jonas Claes</span><br>
                    <a href="https://github.com/jonasclaes" rel="noopener" target="_blank"><i class="fab fa-github"></i></a>
                    <a href="https://twitter.com/jonasclaesbe" rel="noopener" target="_blank"><i class="fab fa-twitter"></i></a>
                    <a href="https://www.linkedin.com/in/jonas-claes-2121b8106/" rel="noopener" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                </small>
            </footer>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
        <script>
            const fIPv4Calculator = {
                form: $("#fIPv4Calculator"),
                ipAddress: $("#fIPv4CalculatorIpAddress"),
                ipAddressBinary1: $("#fIPv4CalculatorIpAddressBinary1"),
                ipAddressBinary2: $("#fIPv4CalculatorIpAddressBinary2"),
                ipAddressBinary3: $("#fIPv4CalculatorIpAddressBinary3"),
                ipAddressBinary4: $("#fIPv4CalculatorIpAddressBinary4"),
                amountAddresses: $("#fIPv4CalculatorAmountAddresses"),
                amountNets: $("#fIPv4CalculatorAmountNets"),
                amountHosts: $("#fIPv4CalculatorAmountHosts")
            }

            const fillFields = () => {
                // Convert IP address to binary.
                const ipAddress = fIPv4Calculator.ipAddress.val();
                const ipAddressOctets = ipAddress.split(/\.|\//).map((octet) => parseInt(octet) | 0);

                // Binary representation
                for (let octetNumber = 0; octetNumber < 4; octetNumber++) {
                    let elem;

                    switch (octetNumber + 1) {
                        case 1:
                            elem = fIPv4Calculator.ipAddressBinary1
                            break;

                        case 2:
                            elem = fIPv4Calculator.ipAddressBinary2
                            break;

                        case 3:
                            elem = fIPv4Calculator.ipAddressBinary3
                            break;

                        case 4:
                            elem = fIPv4Calculator.ipAddressBinary4
                            break;
                    }

                    let octet = ipAddressOctets[octetNumber] | 0;
                    let stringOctet = (octet >>> 0).toString(2).padStart(8, "0");

                    elem.val(`${stringOctet.substr(0, 4)} ${stringOctet.substr(4, 4)}`);
                }

                // Calculate subnet and hosts
                const cidr = ipAddressOctets[4] | 0;
                let networkBits = 0;

                // 192.168.x.x/16
                if (ipAddressOctets[0] === 192 && ipAddressOctets[1] === 168)
                {
                    networkBits = cidr - 16;
                }

                // 172.16.x.x/12
                if (ipAddressOctets[0] === 172 && 16 >= ipAddressOctets[1] <= 31)
                {
                    networkBits = cidr - 12;
                }

                // 10.x.x.x/8
                if (ipAddressOctets[0] === 10)
                {
                    networkBits = cidr - 8;
                }

                networkBits = networkBits < 0 ? 0 : networkBits;

                const hostBits = 32 - cidr;
                let amountOfAddresses = Math.pow(2, hostBits);
                amountOfAddresses = amountOfAddresses < 0 ? 0 : amountOfAddresses;
                let amountOfNetworks = Math.pow(2, networkBits);
                amountOfNetworks = amountOfNetworks < 0 ? 0 : amountOfNetworks;
                fIPv4Calculator.amountAddresses.val(amountOfAddresses);
                fIPv4Calculator.amountNets.val(amountOfNetworks);
                fIPv4Calculator.amountHosts.val(amountOfAddresses - 2);

                // console.log(networkBits, hostBits);
                // console.log(networkBits)
            }

            const resetFields = () => {
                fIPv4Calculator.ipAddress.val("0.0.0.0/0");
                fIPv4Calculator.ipAddressBinary1.val("0000 0000");
                fIPv4Calculator.ipAddressBinary2.val("0000 0000");
                fIPv4Calculator.ipAddressBinary3.val("0000 0000");
                fIPv4Calculator.ipAddressBinary4.val("0000 0000");
            }

            fIPv4Calculator.form.on("input", fillFields);

            $(document).ready(function () {
                resetFields();
            });
        </script>
    </body>
</html>
